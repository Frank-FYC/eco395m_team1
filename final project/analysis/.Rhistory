lm2 = lm(COAST ~ poly(KHOU, 2), data=D_train)
# KNN 250
knn250 = knn.reg(train = X_train, test = X_test, y = y_train, k=250)
names(knn250)
#####
# Compare the models by RMSE_out
#####
# define a helper function for calculating RMSE
rmse = function(y, ypred) {
sqrt(mean((y-ypred)^2))
}
ypred_lm1 = predict(lm1, X_test)
ypred_lm2 = predict(lm2, X_test)
ypred_knn250 = knn250$pred
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
ypred_lm1 = predict(lm1, X_test)
ypred_lm2 = predict(lm2, X_test)
ypred_knn250 = knn250$pred
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
ypred_lm1
y_test
ypred_lm1
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
rmse = function(y, x) {
sqrt(mean((y-ypred)^2))
}
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
ypred_lm1 = predict(lm1, X_test)
ypred_lm2 = predict(lm2, X_test)
ypred_knn250 = knn250$pred
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
rmse = function(y, x) {
sqrt(mean((y-x)^2))
}
ypred_lm1 = predict(lm1, X_test)
ypred_lm2 = predict(lm2, X_test)
ypred_knn250 = knn250$pred
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
y_test
ypred_lm1
rmse = function(y, ypred) {
sqrt(mean((y-as.numeric(ypred))^2))
}
ypred_lm1 = predict(lm1, X_test)
ypred_lm2 = predict(lm2, X_test)
ypred_knn250 = knn250$pred
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
as.numeric(ypred_lm1)
rmse(y_test, ypred_lm1)
y_test
as.numeric(ypred_lm1)
data.matrix(ypred_lm1)
rmse(y_test, ypred_lm1)
rmse = function(y, ypred) {
sqrt(mean((data.matrix(y-ypred))^2))
}
ypred_lm1 = predict(lm1, X_test)
ypred_lm2 = predict(lm2, X_test)
ypred_knn250 = knn250$pred
rmse(y_test, ypred_lm1)
rmse(y_test, ypred_lm2)
rmse(y_test, ypred_knn250)
# attach the predictions to the test data frame
D_test$ypred_lm2 = ypred_lm2
D_test$ypred_knn250 = ypred_knn250
p_test = ggplot(data = D_test) +
geom_point(mapping = aes(x = KHOU, y = COAST), color='lightgrey') +
theme_bw(base_size=18) +
ylim(7000, 20000)
p_test
p_test + geom_point(aes(x = KHOU, y = ypred_knn250), color='red')
p_test + geom_path(aes(x = KHOU, y = ypred_knn250), color='red')
p_test + geom_path(aes(x = KHOU, y = ypred_knn250), color='red') +
geom_path(aes(x = KHOU, y = ypred_lm2), color='blue')
N
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
n
N
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
N
loadhou = loadhou[sample(nrow(loadhou), 150), ]
loadhou
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
loadhou = loadhou[sample.int(nrow(loadhou), 150), replace=FALSE]
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
loadhou_sample = loadhou[sample.int(nrow(loadhou), 150), ]
loadhou_sample
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
source('C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/2019-02-06 Class/in-class exercise.R', echo=TRUE)
setwd("C:/Dropbox/Classes/ECO 395M Data mining and statisical learning/eco395m_team_awesome/final project/analysis")
library(tidyverse)
library(foreign)
library(matrixStats)
df <- read.dta("../data/data_Deming_2008_0217.dta")
varlist <- c("BirthWeight")
compscorefunc <- function(year,column1,column2){
df_comscorefunc <-- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
df_comscorefunc[,column1]
df_comscorefunc[,column2]
}
compscorefunc <- function(year,column1,column2){
df_comscorefunc <-- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
df_comscorefunc[,column1]
df_comscorefunc[,column2]
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
calc_age <- function(currentyear,childyear){
currentyear-childyear
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
calc_age <- function(currentyear,childyear){
currentyear-childyear
}
compscorefunc <- function(year,column1,column2){
df_comscorefunc <-- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
df_comscorefunc[,column1]
df_comscorefunc[,column2]
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
compscorefunc <- function(year,column1,column2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
df_comscorefunc[,column1]
df_comscorefunc[,column2]
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
compmath1986
compscorefunc <- function(year,column1,column2){
df_comscorefunc <-- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
df_comscorefunc[,column1]
df_comscorefunc[,column2]
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
compscorefunc <- function(year,column1,column2){
df_comscorefunc <<- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
df_comscorefunc[,column1]
df_comscorefunc[,column2]
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
compscorefunc <- function(year,column1,column2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
View(compmath1986)
compscorefunc <- function(year,column){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
cbind(df_comscorefunc[,ChildID],
df_comscorefunc[,column])
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
compmath1986 <- compscorefunc(1986,"PIATMT_Raw86")
compscorefunc <- function(year,column1,column2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)==5 | calc_age(year,df$DOB_Yr_Child)==6)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86")
compreading1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86")
View(compreading1986)
View(compmath1986)
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)==age1 | calc_age(year,df$DOB_Yr_Child)==age2)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
View(compmath1986)
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_5to6_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","5","6")
compmath_5to6_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","5","6")
compmath_5to6_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","5","6")
compmath_5to6_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","5","6")
compmath_5to6_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw00","5","6")
compmath_5to6_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw02","5","6")
compmath_5to6_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw04","5","6")
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_5to6_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","5","6")
compmath_5to6_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","5","6")
compmath_5to6_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","5","6")
compmath_5to6_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","5","6")
compmath_5to6_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","5","6")
compmath_5to6_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","5","6")
compmath_5to6_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw104","5","6")
sum(1321,1418,1330,1237,1207,915,743,535,434,282)
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compreading_5to6_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","5","6")
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compreading_5to6_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","5","6")
compreading_5to6_1990 <- compscorefunc(1990,"ChildID","PIATRC_Raw90","5","6")
compreading_5to6_1992 <- compscorefunc(1992,"ChildID","PIATRC_Raw92","5","6")
compreading_5to6_1994 <- compscorefunc(1994,"ChildID","PIATRC_Raw94","5","6")
compreading_5to6_1996 <- compscorefunc(1996,"ChildID","PIATRC_Raw96","5","6")
compreading_5to6_1998 <- compscorefunc(1998,"ChildID","PIATRC_Raw98","5","6")
compreading_5to6_2000 <- compscorefunc(2000,"ChildID","PIATRC_Raw100","5","6")
compreading_5to6_2002 <- compscorefunc(2002,"ChildID","PIATRC_Raw102","5","6")
compreading_5to6_2004 <- compscorefunc(2004,"ChildID","PIATRC_Raw104","5","6")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 | calc_age(year,df$DOB_Yr_Child)<=age2)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
View(compmath_5to6_1986)
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_5to6_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","5","6")
compmath_5to6_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","5","6")
compmath_5to6_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","5","6")
compmath_5to6_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","5","6")
compmath_5to6_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","5","6")
compmath_5to6_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","5","6")
compmath_5to6_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw104","5","6")
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compmath_7to8_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to8_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to8_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to8_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
View(compmath_7to8_1986)
compmath_7to8_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to8_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to8_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to8_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
compmath_7to8_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","7","10")
compmath_7to8_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","7","10")
compmath_7to10_1986 <- subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(year,df$DOB_Yr_Child)<=10)
test <- cbind(compmath_7to10_1986[,ChildID],
compmath_7to10_1986[,PIATMT_Raw86])
compmath_7to10_1986 <- subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10)
test <- cbind(compmath_7to10_1986[,ChildID],
compmath_7to10_1986[,PIATMT_Raw86])
View(compmath_7to10_1986)
calc_age(1986,compmath_7to10_1986$DOB_Yr_Child)
test <- cbind(compmath_7to10_1986[,ChildID],
compmath_7to10_1986[,PIATMT_Raw86])
compmath_7to10_1986[,ChildID]
names(compmath_7to10_1986)
compmath_7to10_1986[,ChildID]
compmath_7to10_1986[,PIATMT_Raw86]
compmath_7to10_1986$ChildID
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2)
cbind(df_comscorefunc$column1,
df_comscorefunc$column2)
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to10_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
compmath_7to10_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","7","10")
compmath_7to10_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","7","10")
compmath_7to10_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","7","10")
compmath_7to10_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","7","10")
compmath_7to10_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","7","10")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2)
cbind(df_comscorefunc$ChildID,
df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"PIATMT_Raw86","5","6")
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2)
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1986[,PIATMT_Raw86]
compmath_7to10_1986 <- subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10)
test <- cbind(compmath_7to10_1986[,ChildID],
compmath_7to10_1986[,PIATMT_Raw86])
test <- cbind(compmath_7to10_1986$ChildID,
compmath_7to10_1986$PIATMT_Raw86)
compmath_7to10_1986[,ChildID]
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
cbind(df_comscorefunc[,column1],
df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_5to6_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","5","6")
compmath_5to6_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","5","6")
compmath_5to6_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","5","6")
compmath_5to6_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","5","6")
compmath_5to6_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","5","6")
compmath_5to6_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","5","6")
compmath_5to6_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw104","5","6")
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compreading_5to6_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","5","6")
compreading_5to6_1990 <- compscorefunc(1990,"ChildID","PIATRC_Raw90","5","6")
compreading_5to6_1992 <- compscorefunc(1992,"ChildID","PIATRC_Raw92","5","6")
compreading_5to6_1994 <- compscorefunc(1994,"ChildID","PIATRC_Raw94","5","6")
compreading_5to6_1996 <- compscorefunc(1996,"ChildID","PIATRC_Raw96","5","6")
compreading_5to6_1998 <- compscorefunc(1998,"ChildID","PIATRC_Raw98","5","6")
compreading_5to6_2000 <- compscorefunc(2000,"ChildID","PIATRC_Raw100","5","6")
compreading_5to6_2002 <- compscorefunc(2002,"ChildID","PIATRC_Raw102","5","6")
compreading_5to6_2004 <- compscorefunc(2004,"ChildID","PIATRC_Raw104","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to10_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
compmath_7to10_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","7","10")
compmath_7to10_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","7","10")
compmath_7to10_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","7","10")
compmath_7to10_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","7","10")
compmath_7to10_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","7","10")
compmath_7to10_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw104","7","10")
compmath_7to10_1986 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))
compmath_7to10_1986[,ChildID]
compmath_7to10_1986$PIATMT_Raw86
compmath_7to10_1986[,"ChildID"]
test <- cbind(compmath_7to10_1986[,"ChildID"],
compmath_7to10_1986[,"PIATMT_Raw86"])
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
df <- read.dta("../data/data_Deming_2008_0217.dta")
calc_age <- function(currentyear,childyear){
currentyear-childyear
}
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
result <- cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compreading_5to6_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
test <- cbind(compmath_7to10_1986[,"ChildID"],
compmath_7to10_1986[,"PIATMT_Raw86"])
test <- cbind(compmath_7to10_1986[,"ChildID"],
compmath_7to10_1986[,"PIATMT_Raw86"])
compmath_7to10_1986[,"ChildID"]
compmath_7to10_1986 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))
test <- cbind(compmath_7to10_1986[,"ChildID"],
compmath_7to10_1986[,"PIATMT_Raw86"])
View(test)
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1986 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))
compmath_7to10_1986 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))%>%
cbind(compmath_7to10_1986[,"ChildID"],compmath_7to10_1986[,"PIATMT_Raw86"])
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))%>%
cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compscorefunc <- function(year,column1,column2,age1,age2){
cbind(as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))[,column1],as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compreading_5to6_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","5","6")
compreading_5to6_1990 <- compscorefunc(1990,"ChildID","PIATRC_Raw90","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to10_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))%>%
cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_5to6_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to10_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <<- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
test <<- cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
df2 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))
cbind(df2[,"ChildID"],df2[,"PIATMT_Raw86"])
df2 <- cbind(df2[,"ChildID"],df2[,"PIATMT_Raw86"])
df2 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))
df2_result <- cbind(df2[,"ChildID"],df2[,"PIATMT_Raw86"])
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compscorefunc <- function(year,column1,column2,age1,age2){
df_comscorefunc <<- as.data.frame(subset(df,calc_age(year,df$DOB_Yr_Child)>=age1 & calc_age(year,df$DOB_Yr_Child)<=age2))
df_comscorefunc_result <<- cbind(df_comscorefunc[,column1],df_comscorefunc[,column2])
}
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
View(compmath_5to6_1988)
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","5","6")
compmath_5to6_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","5","6")
compmath_5to6_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","5","6")
compmath_5to6_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","5","6")
compmath_5to6_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","5","6")
compmath_5to6_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","5","6")
compmath_5to6_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","5","6")
compmath_5to6_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","5","6")
compmath_5to6_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw104","5","6")
compreading_5to6_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","5","6")
compreading_5to6_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","5","6")
compreading_5to6_1990 <- compscorefunc(1990,"ChildID","PIATRC_Raw90","5","6")
compreading_5to6_1992 <- compscorefunc(1992,"ChildID","PIATRC_Raw92","5","6")
compreading_5to6_1994 <- compscorefunc(1994,"ChildID","PIATRC_Raw94","5","6")
compreading_5to6_1996 <- compscorefunc(1996,"ChildID","PIATRC_Raw96","5","6")
compreading_5to6_1998 <- compscorefunc(1998,"ChildID","PIATRC_Raw98","5","6")
compreading_5to6_2000 <- compscorefunc(2000,"ChildID","PIATRC_Raw100","5","6")
compreading_5to6_2002 <- compscorefunc(2002,"ChildID","PIATRC_Raw102","5","6")
compreading_5to6_2004 <- compscorefunc(2004,"ChildID","PIATRC_Raw104","5","6")
compmath_7to10_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","7","10")
compmath_7to10_1988 <- compscorefunc(1988,"ChildID","PIATMT_Raw88","7","10")
compmath_7to10_1990 <- compscorefunc(1990,"ChildID","PIATMT_Raw90","7","10")
compmath_7to10_1992 <- compscorefunc(1992,"ChildID","PIATMT_Raw92","7","10")
compmath_7to10_1994 <- compscorefunc(1994,"ChildID","PIATMT_Raw94","7","10")
compmath_7to10_1996 <- compscorefunc(1996,"ChildID","PIATMT_Raw96","7","10")
compmath_7to10_1998 <- compscorefunc(1998,"ChildID","PIATMT_Raw98","7","10")
compmath_7to10_2000 <- compscorefunc(2000,"ChildID","PIATMT_Raw100","7","10")
compmath_7to10_2002 <- compscorefunc(2002,"ChildID","PIATMT_Raw102","7","10")
compmath_7to10_2004 <- compscorefunc(2004,"ChildID","PIATMT_Raw104","7","10")
compreading_7to10_1986 <- compscorefunc(1986,"ChildID","PIATRC_Raw86","7","10")
compreading_7to10_1988 <- compscorefunc(1988,"ChildID","PIATRC_Raw88","7","10")
compreading_7to10_1990 <- compscorefunc(1990,"ChildID","PIATRC_Raw90","7","10")
compreading_7to10_1992 <- compscorefunc(1992,"ChildID","PIATRC_Raw92","7","10")
compreading_7to10_1994 <- compscorefunc(1994,"ChildID","PIATRC_Raw94","7","10")
compreading_7to10_1996 <- compscorefunc(1996,"ChildID","PIATRC_Raw96","7","10")
compreading_7to10_1998 <- compscorefunc(1998,"ChildID","PIATRC_Raw98","7","10")
compreading_7to10_2000 <- compscorefunc(2000,"ChildID","PIATRC_Raw100","7","10")
compreading_7to10_2002 <- compscorefunc(2002,"ChildID","PIATRC_Raw102","7","10")
compreading_7to10_2004 <- compscorefunc(2004,"ChildID","PIATRC_Raw104","7","10")
df$childage1986 <- calc_age(1986,df$DOB_Yr_Child)
df$childage1986
df$childage2000
df$childage2000 <- calc_age(2000,df$DOB_Yr_Child)
df$childage2000
compmath_5to6_1986 <- compscorefunc(1986,"ChildID","PIATMT_Raw86","5","6")
compmath_5to6_1986
df2 <- as.data.frame(subset(df,calc_age(1986,df$DOB_Yr_Child)>=7 & calc_age(1986,df$DOB_Yr_Child)<=10))
df2_result <- cbind(df2[,"ChildID"],df2[,"PIATMT_Raw86"])
df2_result
